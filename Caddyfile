{
	auto_https off
}

# Configuration HTTPS sécurisée
https://hosting-render-mercure-hub.onrender.com {
	tls internal

	# Headers de sécurité
	header {
		Strict-Transport-Security "max-age=31536000"
		X-Content-Type-Options "nosniff"
		X-Frame-Options "DENY"
	}

	route {
		mercure {
			publisher_jwt "test-publisher-key-123"
			subscriber_jwt "test-subscriber-key-456"
			anonymous
			cors_origins *
			transport_url bolt:///tmp/mercure.db
		}
	}
}

# Redirection HTTP vers HTTPS
http://hosting-render-mercure-hub.onrender.com {
	redir https://hosting-render-mercure-hub.onrender.com{uri} permanent
}
